/*******************************************************
* Copyright (C) 2018-2022 WP Interactive Media, Inc. - All Rights Reserved
* Unauthorized copying of this file, via any medium is strictly prohibited
* Proprietary and confidential
*******************************************************/
(()=>{"use strict";const e=chrome.runtime.id;var n=console.log.bind(window.console);const t=new class{addListener(e){chrome.runtime.onMessage.addListener(e)}removeListener(e){chrome.runtime.onMessage.removeListener(e)}sendMessageToTabAsync(e,t,o=2e4){return new Promise(((s,c)=>{const l=setTimeout((()=>{c()}),o);try{chrome.tabs.sendMessage(t,e,(t=>{chrome.runtime.lastError&&n(chrome.runtime.lastError.message+JSON.stringify(e)),clearTimeout(l),s(t)}))}catch(e){clearTimeout(l),c(e)}}))}t(n,t){return new Promise(((o,s)=>{let c=null;t&&(c=setTimeout((()=>{s({error:"Send Message Timeout"})}),t));try{chrome.runtime.sendMessage(e,n,(e=>{chrome.runtime.lastError&&console.log(chrome.runtime.lastError.message+JSON.stringify(n)),c&&clearTimeout(c),o(e)}))}catch(e){c&&clearTimeout(c),s(e)}}))}};var o;!function(e){e.JOIN_SESSION="joinSession",e.GET_VIDEO_DATA="getVideoData",e.LOAD_SESSION="loadSession",e.NO_SESSION_DATA="noSessionData",e.TEARDOWN="teardown",e.ON_VIDEO_UPDATE="onVideoUpdate",e.SOCKET_LOST_CONNECTION="socketLostConnection",e.REBOOT="socketReconnect",e.LOG_EVENT="logEvent",e.LOG_EXPERIMENT="logExpirement",e.STAY_ALIVE="stayAlive",e.LOAD_CHAT_WINDOW="loadChatWindow",e.RESET_CHAT_WINDOW="resetChatWindow",e.HIDE_CHAT_WINDOW="hideChatWindow"}(o||(o={}));class s extends class extends class{constructor(e,n,t){this.sender=e,this.target=n,this.type=t}}{constructor(e,n,t){super(e,n,t),this.type=t}}{constructor(e,n,t){super(e,n,o.LOG_EVENT),this.data=t,this.sender=e,this.target=n}}try{const e="[aa-link*='try it free']",n=()=>{const e=document.evaluate("//span[contains(., 'START YOUR FREE TRIAL')]",document,null,XPathResult.ANY_TYPE,null),n=document.evaluate("//span[contains(., 'GET THE DISNEY BUNDLE')]",document,null,XPathResult.ANY_TYPE,null);return null!==e.iterateNext()||null!==n.iterateNext()},o=()=>null!==document.evaluate("//a[contains(., 'Sign Up Now')]",document,null,XPathResult.ANY_TYPE,null).iterateNext()||null!==document.querySelector("[aria-label*='Subscribe to HBO Max']"),c=()=>null!==document.evaluate("//button[contains(., 'GET DISNEY+')]",document,null,XPathResult.ANY_TYPE,null).iterateNext();((()=>null!==document.querySelector(e))()||n()||o()||c())&&(window.ti||(window.ti=!0,t.t(new s("Content_Script","Service_Background",{name:"on_init"}))))}catch(e){}})();